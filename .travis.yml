language: c

os: linux

arch: x86_64

sudo: required

services: docker

branches:
    only:
    - coverity_scan
    - master

addons:
    apt:
      packages:
         - gcc-powerpc-linux-gnu
env:
    matrix:
    - RUN_ON_CONTAINER=fedora-rawhide

script:
    - docker build --pull -t ${RUN_ON_CONTAINER} -f servicelog-ci/Dockerfile-${RUN_ON_CONTAINER} . &&
      docker run --volume $HOME/.ccache:/root/.ccache --volume `pwd`:/build --rm -t $RUN_ON_CONTAINER bash -c "./servicelog-ci/build-${RUN_ON_CONTAINER}.sh";
